<!DOCTYPE html>
<html style="margin: 0; width: 100%; height: 100%; ">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>Pathvisiojs Simple Built Production Example</title>
    <link rel="stylesheet" type="text/css" href="http://www.x-tags.org/css/x-tag-components.css"/>
  </head>
  <body>
    <!--
    <iframe id="pathway1" src="./template.html" style="width: 800px; height: 570px; border: 1px solid #ccc;"></iframe>
    -->
    <wikipathways-pathvisiojs style="resize:both; width: 800px; height: 570px; border: 5px solid #ccc; margin:5px;"></wikipathways-pathvisiojs>

    <script src="http://www.x-tags.org/js/x-tag-components.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://rawgit.com/davidjbradshaw/iframe-resizer/master/js/iframeResizer.min.js"></script>
    <script>
      xtag.register('wikipathways-pathvisiojs', {
        // TODO extends isn't working
        //extends: 'div',
        lifecycle: {
          created: function() {
            // TODO compile the template and insert it as a string, using the script tag method of including another page in this one
            xtag.innerHTML(this, '<iframe id="pathvisiojs-frame" src="./load-one.html" style="width:inherit; height:inherit; margin:0px; border: 0px; " />');
            iFrameResize({
              enablePublicMethods: true,
              resizedCallback: function() {
                console.log('parent says resized');
              }
            },'#pathvisiojs-frame');
          }
        }
      });

      /*
      xtag.register('x-foo', {
        lifecycle: {
          created: function() {
            // works because we're not using another component
            this.innerHTML = 'Hello foo';
          }
        },
        methods: {
          hello: function() {
            console.log('hello from x-foo');
          }
        }
      });

      xtag.register('wikipathways-pathvisiojs', {
        lifecycle: {
          created: function() {
            // Since we use xtag.innerHTML, x-foo will be available immediately
            xtag.innerHTML(this, 'Super <x-foo></x-foo>');

            // You can call x-foo methods already
            var foo = this.querySelector('x-foo');
            foo.hello();
          }
        }
      });
      //*/
      //$.ajax()
    </script>
</body>
</html>
