<!DOCTYPE html>
<meta charset="utf-8">
<title>pathvisio.js gpml2json testing</title>

<!-- 
Style guides can be arbitrary, but for sake of consistency within this project, let's use these:
http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml
http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml
http://google-styleguide.googlecode.com/svn/trunk/jsoncstyleguide.xml#General_Guidelines
-->

<body>
  <h1>pathvisio.js gpml2json testing</h1>

  <form>
    <input type="submit" onclick="submitRequest()" />
  </form>

  <h2>GPML</h2>
  <textarea id="gpml-text-area" rows="20" cols="150" placeholder="Paste some GPML here and click submit"></textarea>
  <h2>json</h2>
  <textarea id="json-text-area" rows="20" cols="150"></textarea>

  <script src="../src/lib/jquery/jquery.js"></script>
  <script src="../src/lib/d3/d3.js" charset="utf-8"></script>

  <script src="../build/js/pathvisio.js"></script>

  <script>

    $("form").submit( function () {
      return false;
      } );

    function submitRequest() {
      var sGpml = self.sGpml = $('#gpml-text-area')[0].value;
      var oParser = new DOMParser();
      var oDOM = oParser.parseFromString(sGpml, "text/xml");
      var gpml = self.gpml = oDOM.documentElement;
      var json = pathvisio.pathway.gpml2json(gpml);
      var sJson = self.sJson = JSON.stringify(pathvisio.data.pathways[null], undefined, 2);
      $('#json-text-area').text(sJson)
    };

  </script>
</body>
