(function(window,undef){"".trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});var NULL=null,FALSE=!1,TRUE=!0,NODE_TYPES={Element:1,Attribute:2,Text:3,CDATA:4,Root:9,Fragment:11},XMLConverter,module;function parseXMLString(strXML){var xmlDoc=NULL,out=NULL,isParsed=TRUE;try{xmlDoc="DOMParser"in window?new DOMParser:new ActiveXObject("MSXML2.DOMDocument");xmlDoc.async=FALSE}catch(e){throw new Error("XML Parser could not be instantiated");}if("parseFromString"in
xmlDoc){out=xmlDoc.parseFromString(strXML,"text/xml");isParsed=out.documentElement.tagName!=="parsererror"}else{isParsed=xmlDoc.loadXML(strXML);out=isParsed?xmlDoc:FALSE}if(!isParsed)throw new Error("Error parsing XML string");return out}XMLConverter={isUnsafe:FALSE,isXML:function(o){return typeof o==="object"&&o.nodeType!==undef},getRoot:function(doc){return doc.nodeType===NODE_TYPES.Root?doc.documentElement:doc.nodeType===NODE_TYPES.Fragment?doc.firstChild:doc},convert:function(xml){var out={},
xdoc=typeof xml==="string"?parseXMLString(xml):this.isXML(xml)?xml:undef,root;if(!xdoc)throw new Error("Unable to parse XML");if(xdoc.nodeType===NODE_TYPES.Text||xdoc.nodeType===NODE_TYPES.CDATA)return xdoc.nodeValue;root=this.getRoot(xdoc);out[caseConverter.camelCase(root.nodeName)]={};this.process(root,out[caseConverter.camelCase(root.nodeName)]);return out},process:function(node,buff){var child,attr,name,att_name,value,i,j,tmp,iMax,jMax;if(node.hasChildNodes()){iMax=node.childNodes.length;for(i=
0;i<iMax;i++){child=node.childNodes[i];switch(child.nodeType){case NODE_TYPES.Text:buff.Text=buff.Text?buff.Text+child.nodeValue.trim():child.nodeValue.trim();break;case NODE_TYPES.CDATA:value=child[child.text?"text":"nodeValue"];buff.Text=buff.Text?buff.Text+value:value;break;case NODE_TYPES.Element:name=caseConverter.camelCase(child.nodeName);tmp={};if(name in buff)if(buff[name].length){this.process(child,tmp);buff[name].push(tmp)}else{this.process(child,tmp);buff[name]=[buff[name],tmp]}else{this.process(child,
tmp);buff[name]=tmp}break}}}if(node.attributes.length)for(j=node.attributes.length-1;j>=0;j--){attr=node.attributes[j];att_name=caseConverter.camelCase(attr.name.trim());value=attr.value;buff[(this.isUnsafe?"":"@")+att_name]=value}}};module={xmlToJSON:function(xml,unsafe){XMLConverter.isUnsafe=unsafe!==undef?unsafe:FALSE;return XMLConverter.convert(xml)}};window.xml=window.xml||module})(window);

