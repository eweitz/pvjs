var pathvisio={};pathvisio.helpers=function(){function isUrl(str){var urlPattern=new RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i");return urlPattern.test(str)}function splitStringByNewLine(str){return str.split(/\r\n|\r|\n/g)}function cloneNode(selector){var node=d3.select(selector).node();return d3.select(node.parentNode.insertBefore(node.cloneNode(!0),node.nextSibling))}function getUrlParam(name){var parameter=decodeURIComponent((new RegExp("[?|&]"+name+"="+"([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null;return parameter?parameter:(console.warn('Warning: URL parameter "'+name+'" is null.'),null)}function convertToArray(object){var array=null;return"[object Object]"===Object.prototype.toString.call(object)?(array=[],array.push(object),array):"[object Array]"===Object.prototype.toString.call(object)?object:"[object String]"===Object.prototype.toString.call(object)?(array=[],array.push(object),array):void 0}function getWindowDimensions(){var winW=630,winH=460;return document.body&&document.body.offsetWidth&&(winW=document.body.offsetWidth,winH=document.body.offsetHeight),"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(winW=document.documentElement.offsetWidth,winH=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(winW=window.innerWidth,winH=window.innerHeight),{width:winW,height:winH}}function moveArrayItem(arr,old_index,new_index){if(new_index>=arr.length)for(var k=new_index-arr.length;k--+1;)arr.push(void 0);return arr.splice(new_index,0,arr.splice(old_index,1)[0]),arr}return{isUrl:isUrl,splitStringByNewLine:splitStringByNewLine,getUrlParam:getUrlParam,cloneNode:cloneNode,convertToArray:convertToArray,getWindowDimensions:getWindowDimensions,moveArrayItem:moveArrayItem}}(),pathvisio.pathway=function(){function gpml2json(gpml,callback){self.gpml=gpml,console.log("GPML"),console.log(gpml);var pathway=self.pathway=xml.xmlToJSON(gpml,!0).pathway;console.log("raw json from xml2json"),console.log(xml.xmlToJSON(gpml,!0).pathway);var xmlns=null;try{xmlns=pathway.xmlns}catch(e){return console.log(e.message),void 0}var gpmlXmlnsSupported="http://pathvisio.org/GPML/2013a",gpmlXmlnsIdentifier="/GPML/";if(-1===xmlns.indexOf(gpmlXmlnsIdentifier))return alert("Pathvisio.js does not support the data format provided. Please convert to GPML and retry."),console.log("Pathvisio.js does not support the data format provided. Please convert to GPML and retry."),void 0;xmlns!=gpmlXmlnsSupported&&alert("Pathvisio.js may not fully support the version of GPML provided (xmlns: "+xmlns+"). Please convert to the supported version of GPML (xmlns: "+gpmlXmlnsSupported+")."),pathway.boardWidth=pathway.graphics.boardWidth,pathway.boardHeight=pathway.graphics.boardHeight,pathway.infoBox.x=0,delete pathway.infoBox.centerX,pathway.infoBox.y=0,delete pathway.infoBox.centerY;try{pathway.hasOwnProperty("comment")?(pathway.comments=pathvisio.helpers.convertToArray(pathway.comment),delete pathway.comment,pathway.comments.forEach(function(){})):console.log("No element(s) named 'comment' found in this gpml file.")}catch(e){console.log("Error converting comment to json: "+e.message)}try{pathway.hasOwnProperty("group")?(pathway.groups=pathvisio.helpers.convertToArray(pathway.group),delete pathway.group,pathway.groups.forEach(function(element){element.style=element.hasOwnProperty("style")?element.style.toLowerCase():"none"})):console.log("No element(s) named 'group' found in this gpml file.")}catch(e){console.log("Error converting group to json: "+e.message)}try{if(pathway.hasOwnProperty("graphicalLine")){var graphicalLines=pathvisio.helpers.convertToArray(pathway.graphicalLine);delete pathway.graphicalLine,void 0===pathway.edges&&(pathway.edges=[]),graphicalLines.forEach(function(element){element.edgeType="graphical-line",pathway.edges.push(element)})}else console.log("No element(s) named 'graphicalLine' found in this gpml file.")}catch(e){console.log("Error converting graphicalLine to json: "+e.message)}try{if(pathway.hasOwnProperty("interaction")){var interactions=pathvisio.helpers.convertToArray(pathway.interaction);delete pathway.interaction,void 0===pathway.edges&&(pathway.edges=[]),interactions.forEach(function(element){element.edgeType="interaction",pathway.edges.push(element)}),self.interactions=interactions,self.edges=pathway.edges}else console.log("No element(s) named 'interaction' found in this gpml file.")}catch(e){console.log("Error converting interaction to json: "+e.message)}try{pathway.hasOwnProperty("edges")?pathway.edges=pathvisio.pathway.edge.gpml2json(pathway.edges):console.log("No element(s) named 'edges' found in this gpml file.")}catch(e){console.log("Error converting edges to json: "+e.message)}try{if(pathway.hasOwnProperty("dataNode")){var dataNodes=pathvisio.helpers.convertToArray(pathway.dataNode);delete pathway.dataNode,dataNodes.forEach(function(element){element.elementType="data-node",element.dataNodeType=caseConverter.paramCase(element.type),delete element.type,element.hasOwnProperty("xref")&&(element.xref.database||element.xref.iD?(element.xRef=element.xref,delete element.xref,element.xRef.id=element.xRef.iD,delete element.xRef.iD):delete element.xref)}),pathway.nodes=pathway.hasOwnProperty("nodes")?pathway.nodes.concat(dataNodes):dataNodes}else console.log("No element(s) named 'dataNode' found in this gpml file.")}catch(e){console.log("Error converting dataNode to json: "+e.message)}try{if(pathway.hasOwnProperty("label")){var labels=self.labels=pathvisio.helpers.convertToArray(pathway.label);delete pathway.label,labels.forEach(function(element){element.elementType="label"}),pathway.nodes=pathway.hasOwnProperty("nodes")?pathway.nodes.concat(labels):labels}else console.log("No element(s) named 'label' found in this gpml file.")}catch(e){console.log("Error converting label to json: "+e.message)}try{if(pathway.hasOwnProperty("shape")){var shapes=pathvisio.helpers.convertToArray(pathway.shape);delete pathway.shape,shapes.forEach(function(element){element.elementType="shape"}),pathway.nodes=pathway.hasOwnProperty("nodes")?pathway.nodes.concat(shapes):shapes}else console.log("No element(s) named 'shape' found in this gpml file.")}catch(e){console.log("Error converting shape to json: "+e.message)}try{pathway.hasOwnProperty("nodes")?pathway.nodes=pathvisio.pathway.node.gpml2json(pathway.nodes):console.log("No element(s) named 'nodes' found in this gpml file.")}catch(e){console.log("Error converting nodes to json: "+e.message)}try{pathway.hasOwnProperty("biopaxRef")?(pathway.biopaxRefs=pathvisio.helpers.convertToArray(pathway.biopaxRef),delete pathway.biopaxRef):console.log("No element(s) named 'biopaxRef' for the element 'pathway' found in this gpml file.")}catch(e){console.log("Error converting biopaxRef to json: "+e.message)}try{pathway.hasOwnProperty("biopax")?(pathway.biopax.bpPublicationXrefs=pathvisio.helpers.convertToArray(pathway.biopax.bpPublicationXref),delete pathway.biopax.bpPublicationXref):console.log("No element(s) named 'biopax' found in this gpml file.")}catch(e){console.log("Error converting biopax to json: "+e.message)}console.log("JSON:"),console.log(pathway),console.log("pathway"),console.log(pathway),delete pathway.graphics,callback(pathway)}function getJson(url,callback){if(!url){var error="Error: URL not specified.";return console.warn(error),error}$.get(url,"application/xml",function(gpml){pathvisio.pathway.gpml2json(gpml,function(json){callback(json)})})}function highlightByLabel(nodeLabel){console.log("nodeLabel"),console.log(nodeLabel);var svg=d3.select("#pathway-image");svg.selectAll("g.nodes-container").attr("style","");var dataNodes=self.dataNodes=svg.datum().nodes.filter(function(element){return"data-node"===element.elementType}),dataNodesWithText=self.dataNodesWithText=dataNodes.filter(function(element){return!!element.textLabel}),selectedNodes=self.selectedNodes=dataNodesWithText.filter(function(element){return-1!==element.textLabel.text.indexOf(nodeLabel)});selectedNodes.forEach(function(node){console.log("node"),console.log(node);var nodeDomElement=svg.select("#nodes-container-"+node.graphId);nodeDomElement.attr("style","fill:yellow"),console.log("nodeDomElement"),console.log(nodeDomElement),self.nodeDomElement=nodeDomElement})}function draw(svg){function dragmove(d){d.x=d3.event.x,d.y=d3.event.y,d3.select(this).attr("x",d3.event.x).attr("y",d3.event.y)}var pathway=null;return svg.datum()?(pathway=svg.datum(),d3.behavior.drag().on("drag",dragmove),svg.attr("width",pathway.boardWidth),svg.attr("height",pathway.boardHeight),pathway.biopaxRefs&&svg.select("#viewport").selectAll(".pathway-publication-xref-text").data(pathway.biopaxRefs).enter().append("text").attr("id",function(d){return"pathway-publication-xref-text-"+d}).attr("x",0).attr("y",0).attr("transform",function(d,i){return"translate("+(200+12*i)+" "+12+")"}).attr("class","pathway-publication-xref-text").attr("style","").text(function(d){var index=0,rdfId=null;do rdfId=pathway.biopax.bpPublicationXrefs[index].rdfId,index+=1;while(rdfId!==d.Text&&index<pathway.biopax.bpPublicationXrefs.length);return index}),svg.datum().symbolsAvailable=svg.selectAll("symbol"),svg.datum().markersAvailable=svg.selectAll("marker"),pathway.hasOwnProperty("groups")&&pathvisio.pathway.group.drawAll(svg),pathway.hasOwnProperty("edges")&&pathvisio.pathway.edge.drawAll(svg),pathway.hasOwnProperty("nodes")&&pathvisio.pathway.node.drawAll(svg),pathway.hasOwnProperty("infoBox")&&pathvisio.pathway.infoBox.draw(svg),window.setTimeout(function(){window.root=document.documentElement.getElementsByTagName("svg")[0],root.addEventListener("click",function(){enableZoom=1}),setupHandlers(root)},1e3),void 0):(console.warn("Error: No data entered as input."),"Error")}function getSvg(url,attemptCount,callback){d3.text(url,"text/plain",function(svg){d3.select("#pathway-container")[0][0].innerHTML=svg,callback(d3.select("#pathway-image"))})}function load(targetSelector,svgUrl,gpmlUrl,highlightByLabelSelector){return targetSelector?1!==d3.select(targetSelector).length?console.warn("pathway container selector must be unique."):(getSvg(svgUrl,1,function(svg){d3.select(targetSelector),getJson(gpmlUrl,function(pathway){svg.datum(pathway),draw(svg);var nodeLabels=[];pathway.nodes.forEach(function(node){node.textLabel&&"data-node"===node.elementType&&nodeLabels.push(node.textLabel.text)}),$(highlightByLabelSelector).typeahead({name:"Find in pathway",local:nodeLabels,limit:10}),$(".icon-eye-open").click(function(){var nodeLabel=$("#highlight-by-label").val();nodeLabel?pathvisio.pathway.highlightByLabel(nodeLabel):console.warn("Error: No data node value entered.")})})}),void 0):console.warn("Error: No pathway container selector specified as target.")}return{draw:draw,load:load,getJson:getJson,gpml2json:gpml2json,highlightByLabel:highlightByLabel}}(),pathvisio.pathway.group=function(){function drawAll(svg){var groups=svg.datum().groups;if(!groups)return console.warn("Error: No group data available.");var validGroups=groups.filter(function(el){var groupId=el.groupId;return svg.datum().nodes.filter(function(el){return el.groupRef===groupId}).length>0}),pathData=null;svg.select("#viewport").selectAll("use.group").data(validGroups).enter().append("path").attr("id",function(d){return"group-"+d.graphId}).attr("class",function(d){return"group group-"+d.style}).attr("d",function(d){var groupDimensions=getDimensions(svg.datum(),d.groupId);return pathData="none"===d.style||"group"===d.style||"pathway"===d.style?"M "+groupDimensions.x+" "+groupDimensions.y+" L "+(groupDimensions.x+groupDimensions.width)+" "+groupDimensions.y+" L "+(groupDimensions.x+groupDimensions.width)+" "+(groupDimensions.y+groupDimensions.height)+" L "+groupDimensions.x+" "+(groupDimensions.y+groupDimensions.height)+" Z":"complex"===d.style?"M "+(groupDimensions.x+20)+" "+groupDimensions.y+" L "+(groupDimensions.x+groupDimensions.width-20)+" "+groupDimensions.y+" L "+(groupDimensions.x+groupDimensions.width)+" "+(groupDimensions.y+20)+" L "+(groupDimensions.x+groupDimensions.width)+" "+(groupDimensions.y+groupDimensions.height-20)+" L "+(groupDimensions.x+groupDimensions.width-20)+" "+(groupDimensions.y+groupDimensions.height)+" L "+(groupDimensions.x+20)+" "+(groupDimensions.y+groupDimensions.height)+" L "+groupDimensions.x+" "+(groupDimensions.y+groupDimensions.height-20)+" L "+groupDimensions.x+" "+(groupDimensions.y+20)+" Z":"M "+groupDimensions.x+" "+groupDimensions.y+" L "+(groupDimensions.x+groupDimensions.width)+" "+groupDimensions.y+" L "+(groupDimensions.x+groupDimensions.width)+" "+(groupDimensions.y+groupDimensions.height)+" L "+groupDimensions.x+" "+(groupDimensions.y+groupDimensions.height)+" Z"})}function getDimensions(pathway,groupId){var groupMembers=pathway.nodes.filter(function(el){return el.groupRef===groupId}),group={},margin=12;return group.x=d3.min(groupMembers,function(el){return el.x})-margin,group.y=d3.min(groupMembers,function(el){return el.y})-margin,group.width=d3.max(groupMembers,function(el){return el.x+el.width})-group.x+margin,group.height=d3.max(groupMembers,function(el){return el.y+el.height})-group.y+margin,group}return{drawAll:drawAll,getDimensions:getDimensions}}(),pathvisio.pathway.infoBox=function(){function draw(svg){var infoBox=[];svg.datum().hasOwnProperty("name")&&infoBox.push({key:"Title",value:svg.datum().name}),svg.datum().hasOwnProperty("license")&&infoBox.push({key:"Availability",value:svg.datum().license}),svg.datum().hasOwnProperty("lastModified")&&infoBox.push({key:"Last modified",value:svg.datum().lastModified}),svg.datum().hasOwnProperty("organism")&&infoBox.push({key:"Organism",value:svg.datum().organism});var infoBoxElements=svg.select("#viewport").selectAll("text.info-box").data(infoBox).enter().append("text").attr("id",function(d,i){return"info-box-"+i}).attr("class","info-box").attr("x",0).attr("y",function(d,i){return 14+14*i});infoBoxElements.append("tspan").attr("class","info-box-property-name").text(function(d){return d.key+": "}),infoBoxElements.append("tspan").text(function(d){return d.value})}return{draw:draw}}(),pathvisio.pathway.node=function(){function gpml2json(rawJsonNodes){try{rawJsonNodes.forEach(function(element){if(element.hasOwnProperty("comment")&&(element.comments=pathvisio.helpers.convertToArray(element.comment),delete element.comment),element.graphics.hasOwnProperty("zorder")&&(element.zIndex=parseFloat(element.graphics.zorder)),element.x=parseFloat(element.graphics.centerX)-parseFloat(element.graphics.width)/2,element.y=parseFloat(element.graphics.centerY)-parseFloat(element.graphics.height)/2,element.width=parseFloat(element.graphics.width),element.height=parseFloat(element.graphics.height),element.graphics.hasOwnProperty("color")){var color=new RGBColor(element.graphics.color);color.ok?element.stroke=color.toHex():(console.warn("Invalid Color encountered. Setting Color to black."),element.fill="#000000")}if(element.symbolType=element.graphics.hasOwnProperty("shapeType")?caseConverter.paramCase(element.graphics.shapeType):"data-node"===element.elementType?"rectangle":"none",element.graphics.hasOwnProperty("fillColor"))if(element.graphics.fillColor=element.graphics.fillColor.toLowerCase(),"transparent"===element.graphics.fillColor)element.fillOpacity=0;else{var fill=new RGBColor(element.graphics.fillColor);fill.ok?element.fill=fill.toHex():(console.warn("Invalid FillColor encountered. Setting FillColor to gray."),element.fill="#999999"),"none"!==element.symbolType&&(element.fillOpacity=1)}if(element.graphics.hasOwnProperty("lineThickness")&&(element.strokeWidth=element.graphics.lineThickness),element.graphics.hasOwnProperty("lineStyle")&&(element.strokeStyle=element.graphics.lineStyle.toLowerCase(),"broken"===element.strokeStyle&&(element.strokeStyle="dashed")),element.hasOwnProperty("attribute")&&(element.attributes=pathvisio.helpers.convertToArray(element.attribute),delete element.attribute,element.attributes.forEach(function(el){"org.pathvisio.DoubleLineProperty"===el.key&&"Double"===el.value?(console.log("double"),console.log(el),element.strokeStyle="double"):"org.pathvisio.CellularComponentProperty"===el.key&&"None"!==el.value&&(element.cellularComponent=el.value)}),delete element.attributes),element.graphics.hasOwnProperty("rotation")&&(element.rotation=element.graphics.rotation*(180/Math.PI)),element.hasOwnProperty("textLabel"))if(element.textLabel){var text=element.textLabel.toString().replace("&#xA;","\r\n");delete element.textLabel,element.textLabel={},element.textLabel.text=text,element.hasOwnProperty("stroke")&&(element.textLabel.fill=element.stroke);var fontSize=null;fontSize=element.graphics.hasOwnProperty("fontSize")?element.graphics.fontSize:10,element.textLabel.fontSize=fontSize,element.graphics.hasOwnProperty("fontName")&&(element.textLabel.fontFamily=element.graphics.fontName),element.graphics.hasOwnProperty("fontWeight")&&(element.textLabel.fontWeight=element.graphics.fontWeight.toLowerCase()),element.graphics.hasOwnProperty("fontStyle")&&(element.textLabel.fontStyle=element.graphics.fontStyle.toLowerCase()),element.textLabel.textAnchor=alignToAnchorMappings.hasOwnProperty(element.graphics.align)?alignToAnchorMappings[element.graphics.align]:"middle",element.textLabel.vAlign=element.graphics.hasOwnProperty("valign")?element.graphics.valign.toLowerCase():"top"}else delete element.textLabel;try{element.hasOwnProperty("biopaxRef")?(element.biopaxRefs=pathvisio.helpers.convertToArray(element.biopaxRef),delete element.biopaxRef):console.log("No element(s) named 'biopaxRef' found for this node in this gpml file.")}catch(e){console.log("Error converting node's biopaxRef to json: "+e.message)}delete element.graphics});var validJsonNodes=rawJsonNodes.sort(function(a,b){return a.zIndex-b.zIndex});return validJsonNodes}catch(e){return console.log("Error converting labelable elements to json: "+e.message),e}}function drawAll(svg){var nodesContainer=svg.select("#viewport").selectAll("g.nodes-container").data(svg.datum().nodes).enter().append("g").attr("id",function(d){return"nodes-container-"+d.graphId}).attr("transform",function(d){return"translate("+d.x+" "+d.y+")"}).attr("class","nodes-container").on("click",function(d){"data-node"===d.elementType&&pathvisio.pathway.xRef.displayData(svg.datum().organism,d)});nodesContainer.each(function(d,i){var node=d3.select(this).append("use").attr("id",function(d){return"node-"+d.graphId}).attr("transform",function(d){var transform="scale(1)";return d.hasOwnProperty("rotation")&&(transform="rotate("+d.rotation+" "+d.width/2+" "+d.height/2+")"),transform}).attr("class",function(d){var styleClass="";return styleClass="data-node"===d.elementType?"node "+d.elementType+" "+d.dataNodeType:"node "+d.elementType}).attr("x",0).attr("y",0).attr("width",function(d){return d.width}).attr("height",function(d){return d.height}).attr("z-index",function(d){return d.zIndex}).attr("style",function(d){var style="";d.hasOwnProperty("fill")&&(style+="fill:"+d.fill+"; "),d.hasOwnProperty("fillOpacity")&&(style+="fill-opacity:"+d.fillOpacity+"; "),d.hasOwnProperty("stroke")&&(style+="stroke:"+d.stroke+"; ");var strokeWidthEffective=null;return strokeWidthEffective=d.hasOwnProperty("strokeWidth")?2*d.strokeWidth:2,style+="stroke-width:"+strokeWidthEffective+"; ",d.hasOwnProperty("strokeStyle")&&("dashed"===d.strokeStyle&&(style+="stroke-dasharray: 5,3; "),"double"===d.strokeStyle&&d3.select(nodesContainer[0][i]).append("use").attr("id",function(d){return"node-double"+d.graphId}).attr("class",function(d){var styleClass="";return styleClass="data-node"===d.elementType?"node "+d.elementType+" "+d.dataNodeType:"node "+d.elementType}).attr("transform",function(d){var transform="scale(1)";return d.hasOwnProperty("rotation")&&(transform="rotate("+d.rotation+" "+d.width/2+" "+d.height/2+")"),transform}).attr("x",function(){return strokeWidthEffective}).attr("y",function(){return strokeWidthEffective}).attr("width",function(d){return d.width-2*strokeWidthEffective}).attr("height",function(d){return d.height-2*strokeWidthEffective}).attr("xlink:xlink:href",function(d){return"#"+d.symbolType}).attr("style",function(){return style+"fill-opacity:0; "})),style});if(1===svg.datum().symbolsAvailable[0].filter(function(element){return element.id===d.symbolType}).length?node.attr("xlink:xlink:href",function(d){return"#"+d.symbolType}):(node.attr("xlink:xlink:href","#rectangle"),console.warn("Pathvisio.js does not have access to the requested symbol: "+svg.datum().nodes[0].symbolType+". Rectangle used as placeholder.")),d.hasOwnProperty("textLabel")){var nodeText=d3.select(this).append("text").attr("id",function(d){return"node-text-"+d.graphId}).attr("x",0).attr("y",0).attr("transform",function(d){var dx=null;dx=d.textLabel.hasOwnProperty("textAnchor")?"start"===d.textLabel.textAnchor?5:"end"===d.textLabel.textAnchor?d.width-5:d.width/2:d.width/2;var dy=null;return dy=d.textLabel.hasOwnProperty("vAlign")?"top"===d.textLabel.vAlign?5+1*d.textLabel.fontSize:"bottom"===d.textLabel.vAlign?d.height-(5+.3*d.textLabel.fontSize+(pathvisio.helpers.splitStringByNewLine(d.textLabel.text).length-1)*d.textLabel.fontSize):d.height/2+.3*d.textLabel.fontSize-(pathvisio.helpers.splitStringByNewLine(d.textLabel.text).length-1)*d.textLabel.fontSize/2:d.height/2+.3*d.textLabel.fontSize-(pathvisio.helpers.splitStringByNewLine(d.textLabel.text).length-1)*d.textLabel.fontSize/2,"translate("+dx+" "+dy+")"}).attr("class",function(d){var styleClass="";return"data-node"===d.elementType&&(styleClass=d.dataNodeType),styleClass}).attr("style",function(d){var style="";return d.fontSize,d.textLabel.hasOwnProperty("fill")&&(style+="fill:"+d.textLabel.fill+"; "),d.textLabel.hasOwnProperty("fontFamily")&&(style+="font-family:"+d.textLabel.fontFamily+"; "),d.textLabel.hasOwnProperty("fontSize")&&(style+="font-size:"+d.textLabel.fontSize+"px; "),d.textLabel.hasOwnProperty("fontWeight")&&(style+="font-weight:"+d.textLabel.fontWeight+"; "),d.textLabel.hasOwnProperty("fontStyle")&&(style+="font-style:"+d.textLabel.fontStyle+"; "),d.textLabel.hasOwnProperty("textAnchor")&&(style+="text-anchor:"+d.textLabel.textAnchor+"; "),style});nodeText.each(function(d){var fontSize=d.textLabel.fontSize;d3.select(this).selectAll("tspan").data(function(d){var textArray=pathvisio.helpers.splitStringByNewLine(d.textLabel.text);return textArray}).enter().append("tspan").attr("x",0).attr("y",function(d,i){return i*fontSize}).text(function(d){return d})}),d.hasOwnProperty("biopaxRefs")&&d3.select(this).selectAll(".node-publication-xref-text").data(d.biopaxRefs).enter().append("text").attr("id",function(d){return"node-publication-xref-text-"+d}).attr("x",0).attr("y",0).attr("transform",function(d,i){return"translate("+12*i+" "+-12+")"}).attr("class","node-publication-xref-text").attr("style","").text(function(d){var index=0,rdfId=null;do console.log("svg.datum().biopax"),console.log(svg.datum().biopax),rdfId=svg.datum().biopax.bpPublicationXrefs[index].rdfId,index+=1;while(rdfId!==d.Text&&index<svg.datum().biopax.bpPublicationXrefs.length);return index})}})}function getPortCoordinates(boxDimensions,relX,relY){var port={};return port.x=boxDimensions.x+relX*boxDimensions.width,port.y=boxDimensions.y+relY*boxDimensions.height,port}var alignToAnchorMappings={Left:"start",Center:"middle",Right:"end"};return{drawAll:drawAll,getPortCoordinates:getPortCoordinates,gpml2json:gpml2json}}(),pathvisio.pathway.edge=function(){function gpml2json(rawJsonEdges){function attachedToAnchor(point,edges){var anchor=null,i=-1;do i+=1,anchor=edges[i].anchors.filter(function(element){return element.graphId===point.graphRef})[0];while(!anchor&&i<edges.length-1);return void 0!==anchor}try{rawJsonEdges.forEach(function(element){if(element.graphics.hasOwnProperty("anchor")&&(element.anchors=pathvisio.helpers.convertToArray(element.graphics.anchor)),element.graphics.hasOwnProperty("color")){var color=new RGBColor(element.graphics.color);color.ok&&(element.stroke=color.toHex())}element.strokeWidth=element.graphics.lineThickness,element.graphics.hasOwnProperty("connectorType")&&(element.connectorType=element.graphics.connectorType.toLowerCase()),element.graphics.hasOwnProperty("lineStyle")?(element.strokeStyle=element.graphics.lineStyle.toLowerCase(),"broken"===element.strokeStyle&&(element.strokeStyle="dashed")):element.hasOwnProperty("attribute")&&"org.pathvisio.DoubleLineProperty"===element.attribute.key&&"Double"===element.attribute.value&&(element.strokeStyle="double",delete element.attribute),element.zIndex=element.graphics.zorder,element.hasOwnProperty("xref")&&(element.xref.database||element.xref.id?(element.xref=element.xRef,delete element.xref):delete element.xref);var points=pathvisio.helpers.convertToArray(element.graphics.point),pointsData=pathvisio.pathway.edge.point.gpml2json(points);element.points=pointsData.points,element.markerStart=pointsData.markerStart,element.markerEnd=pointsData.markerEnd,delete element.graphics}),rawJsonEdges.sort(function(a,b){return a.zIndex-b.zIndex});var edgesWithAnchors=[],edgesWithoutAnchors=[];rawJsonEdges.forEach(function(element){element.hasOwnProperty("anchors")?edgesWithAnchors.push(element):edgesWithoutAnchors.push(element)});var validJsonEdges=[],unsortedJsonEdges=edgesWithAnchors;unsortedJsonEdges.forEach(function(element,index,array){attachedToAnchor(element.points[0],edgesWithAnchors)||attachedToAnchor(element.points[element.points.length-1],edgesWithAnchors)||(validJsonEdges.push(element),array.splice(index,1))});do unsortedJsonEdges.forEach(function(element,index,array){attachedToAnchor(element.points[0],edgesWithAnchors)&&!attachedToAnchor(element.points[0],validJsonEdges)||!attachedToAnchor(element.points[element.points.length-1],validJsonEdges)&&attachedToAnchor(element.points[element.points.length-1],edgesWithAnchors)||(validJsonEdges.push(element),array.splice(index,1))});while(unsortedJsonEdges.length>0);return validJsonEdges=validJsonEdges.concat(edgesWithoutAnchors)}catch(e){return console.log("Error converting edge to json: "+e.message),e}}function drawAll(svg){if(svg.datum().hasOwnProperty("edges")){var pathData=null;svg.select("#viewport").selectAll("pathway.edge").data(svg.datum().edges).enter().append("path").attr("id",function(d){return d.edgeType+"-"+d.graphId}).attr("class",function(d){var styleClass="edge "+d.edgeType+" ";return d.hasOwnProperty("strokeStyle")&&"dashed"===d.strokeStyle&&(styleClass+=" dashed-stroke"),styleClass}).attr("d",function(d){return pathData=pathvisio.pathway.edge.pathData.get(svg,d),d.hasOwnProperty("strokeStyle")&&"double"===d.strokeStyle&&svg.select("#viewport").append("path").attr("class",d.edgeType+"-double").attr("d",pathData).attr("class","drawing-board-color-stroke").attr("style","stroke-width:"+d.strokeWidth+"; ").attr("marker-start","url(#"+pathvisio.pathway.edge.marker.draw(svg,d.markerStart,"start",d.stroke)+")").attr("marker-end","url(#"+pathvisio.pathway.edge.marker.draw(svg,d.markerEnd,"end",d.stroke)+")"),pathData}).attr("style",function(d){var style="stroke-width:"+d.strokeWidth+"; ";return d.hasOwnProperty("stroke")&&(style+="stroke:"+d.stroke+"; "),d.hasOwnProperty("strokeStyle")&&"double"===d.strokeStyle&&(style+="stroke-width:"+3*d.strokeWidth+"; "),style}).attr("marker-start",function(d){var markerStart=pathvisio.pathway.edge.marker.draw(svg,d.markerStart,"start",d.stroke);return d.hasOwnProperty("strokeStyle")&&"double"===d.strokeStyle&&(markerStart="double-line-hack-start"),"url(#"+markerStart+")"}).attr("marker-end",function(d){var markerEnd=pathvisio.pathway.edge.marker.draw(svg,d.markerEnd,"end",d.stroke);return d.hasOwnProperty("strokeStyle")&&"double"===d.strokeStyle&&(markerEnd="double-line-hack-end"),"url(#"+markerEnd+")"}).attr("fill","none")}}return{gpml2json:gpml2json,drawAll:drawAll}}(),pathvisio.pathway.edge.marker=function(){function draw(svg,name,position,color){var markerUrl="";if("none"===name)markerUrl=name;else if(1===svg.datum().markersAvailable[0].filter(function(element){return element.id===name+"-"+position+"-black"}).length)if("#000"!==color&&"#000000"!==color&&color){var markerElementBlack=svg.select("marker#"+name+"-"+position+"-black"),markerElement=pathvisio.helpers.cloneNode(markerElementBlack[0][0]),markerElementStyle="";"black"===markerElement[0][0].getAttribute("stroke")&&(markerElementStyle+="stroke:"+color+"; "),"black"===markerElement[0][0].getAttribute("fill")&&(markerElementStyle+="fill:"+color+"; "),markerElement[0][0].setAttribute("id",name+"-"+position+"-"+color),markerElement[0][0].setAttribute("style",markerElementStyle),markerUrl=name+"-"+position+"-"+color}else markerUrl=name+"-"+position+"-black";else markerUrl="none",console.warn("Pathvisio.js does not have access to the requested marker: "+name);return markerUrl}return{draw:draw}}(),pathvisio.pathway.edge.point=function(){function gpml2json(rawJsonPoints){try{var markerStart="none",markerEnd="none";rawJsonPoints.forEach(function(element,index,array){if(void 0!==element.graphRef){delete element.x,delete element.y;var relX=(Math.round(2*element.relX)/2).toString();element.relX=parseFloat(anchorPositionMappings[relX]);var relY=(Math.round(2*element.relY)/2).toString();element.relY=parseFloat(anchorPositionMappings[relY]),0===element.relX?element.dx=-1:1===element.relX?element.dx=1:0===element.relY?element.dy=-1:1===element.relY&&(element.dy=1)}0===index&&markerMappings.hasOwnProperty(element.arrowHead)?(markerStart=markerMappings[element.arrowHead],delete element.arrowHead):index===array.length-1&&markerMappings.hasOwnProperty(element.arrowHead)&&(markerEnd=markerMappings[element.arrowHead],delete element.arrowHead)});var validJsonPoints=rawJsonPoints;return{points:validJsonPoints,markerStart:markerStart,markerEnd:markerEnd}}catch(e){return console.log("Error converting point to json: "+e.message),e}}function getGraphRef(pathway,point){if(self.point=point,point.hasOwnProperty("graphRef")){if(pathway.hasOwnProperty("nodes")){var node=pathway.nodes.filter(function(element){return element.graphId===point.graphRef})[0];if(void 0!==node)return{type:"node",element:node}}if(pathway.hasOwnProperty("groups")){var group=pathway.groups.filter(function(element){return element.graphId===point.graphRef})[0];if(void 0!==group)return{type:"group",groupId:group.groupId}}var edgesWithAnchors=pathway.edges.filter(function(element){return element.hasOwnProperty("anchors")});self.edgesWithAnchors=edgesWithAnchors;var anchor=null,i=-1;do i+=1,anchor=edgesWithAnchors[i].anchors.filter(function(element){return element.graphId===point.graphRef})[0];while(!anchor&&i<edgesWithAnchors.length);return{type:"anchor",element:anchor,edge:edgesWithAnchors[i]}}return{type:"unconnected"}}function getCoordinates(svg,point){var coordinates={},edgeTerminusRef=self.edgeTerminusRef=getGraphRef(svg.datum(),point);if("anchor"!==edgeTerminusRef.type)if("unconnected"===edgeTerminusRef.type)coordinates.x=point.x,coordinates.y=point.y;else if("node"===edgeTerminusRef.type)coordinates=pathvisio.pathway.node.getPortCoordinates(edgeTerminusRef.element,point.relX,point.relY);else{if("group"!==edgeTerminusRef.type)return"error";var groupDimensions=pathvisio.pathway.group.getDimensions(svg.datum(),edgeTerminusRef.groupId);coordinates=pathvisio.pathway.node.getPortCoordinates(groupDimensions,point.relX,point.relY)}else{var path=svg.select("#interaction-"+edgeTerminusRef.edge.graphId)[0][0];coordinates=path.getPointAtLength(edgeTerminusRef.element.position*path.getTotalLength())}return coordinates}function isTwoPointElbow(source,target){var isRightAngle=Math.abs(source.dx)===Math.abs(target.dy)&&Math.abs(source.dy)===Math.abs(target.dx),sourcePasses=(target.x-source.x)/Math.abs(target.x-source.x)===source.dx||(target.y-source.y)/Math.abs(target.y-source.y)===source.dy,targetPasses=(source.x-target.x)/Math.abs(source.x-target.x)===target.dx||(source.y-target.y)/Math.abs(source.y-target.y)===target.dy;
return isRightAngle&&sourcePasses&&targetPasses}var anchorPositionMappings={"-1":0,"-0.5":.333,0:.5,.5:.667,1:1},markerMappings={Arrow:"arrow","mim-branching-left":"mim-branching-left","mim-branching-right":"mim-branching-right","mim-necessary-stimulation":"mim-necessary-stimulation","mim-binding":"mim-binding","mim-conversion":"mim-conversion","mim-stimulation":"mim-stimulation","mim-modification":"mim-modification","mim-catalysis":"mim-catalysis","mim-inhibition":"mim-inhibition","mim-cleavage":"mim-cleavage","mim-covalent-bond":"mim-covalent-bond","mim-transcription-translation":"mim-transcription-translation","mim-gap":"mim-gap",none:"none",TBar:"t-bar"};return{getGraphRef:getGraphRef,getCoordinates:getCoordinates,isTwoPointElbow:isTwoPointElbow,gpml2json:gpml2json}}(),pathvisio.pathway.edge.pathData=function(){function switchDirection(currentDirection){return"H"===currentDirection?"V":"H"}function get(svg,edge){var sourcePoint=edge.points[0],source=pathvisio.pathway.edge.point.getCoordinates(svg,sourcePoint);source.dx=void 0===sourcePoint.dx?0:sourcePoint.dx,source.dy=void 0===sourcePoint.dy?0:sourcePoint.dy;var targetPoint=edge.points[edge.points.length-1],target=pathvisio.pathway.edge.point.getCoordinates(svg,targetPoint);target.dx=void 0===targetPoint.dx?0:targetPoint.dx,target.dy=void 0===targetPoint.dy?0:targetPoint.dy;var pathData="M "+source.x+" "+source.y;if(edge.connectorType&&void 0!==edge.connectorType&&"straight"!==edge.connectorType)if("elbow"===edge.connectorType&&edge.points[0].hasOwnProperty("graphRef")&&edge.points[edge.points.length-1].hasOwnProperty("graphRef"))currentDirection=1===Math.abs(source.dx)?"H":"V",2===edge.points.length&&pathvisio.pathway.edge.point.isTwoPointElbow(source,target)||(edge.points.length>2?edge.points.forEach(function(element,index,array){index>0&&index<array.length-1&&(pathData+="H"===currentDirection?" "+currentDirection+" "+element.x:" "+currentDirection+" "+element.y,currentDirection=switchDirection(currentDirection))}):(1===Math.abs(source.dx)?pathData+=" H "+(source.x+15*source.dx):1===Math.abs(source.dy)&&(pathData+=" V "+(source.y+15*source.dy),currentDirection=switchDirection(currentDirection)),target.dx===(target.x-source.x)/Math.abs(target.x-source.x)||source.dx===target.dy||source.dy===target.dx?(pathData+=" H "+(target.x+15*target.dx)+" V "+target.y+" H "+target.x,currentDirection=switchDirection(currentDirection)):(target.dy===(target.y-source.y)/Math.abs(target.y-source.y)||source.dx===target.dy||source.dy===target.dx)&&(pathData+=" V "+(target.y+15*target.dy)+" H "+target.x+" V "+target.y,currentDirection=switchDirection(currentDirection)))),"H"===currentDirection?(pathData+=" "+currentDirection+" "+target.x,currentDirection=switchDirection(currentDirection),pathData+=" "+currentDirection+" "+target.y,currentDirection=switchDirection(currentDirection)):(pathData+=" "+currentDirection+" "+target.y,currentDirection=switchDirection(currentDirection),pathData+=" "+currentDirection+" "+target.x,currentDirection=switchDirection(currentDirection));else if("segmented"===edge.connectorType)edge.points.forEach(function(element,index,array){index>0&&index<array.length-1&&(pathData+=" L "+element.x+" "+element.y)}),pathData+=" L "+target.x+" "+target.y;else{if("curved"===edge.connectorType){if(3===edge.points.length){var pointControl=edge.points[1];return pathData+=" S"+pointControl.x+","+pointControl.y+" "+target.x+","+target.y}return pathData+=" T"+target.x+","+target.y}console.log("Warning: pathvisio.js does not support connector type: "+edge.connectorType),edge.points.forEach(function(element,index,array){index>0&&index<array.length-1&&(pathData+=" L "+element.x+" "+element.y)}),pathData+=" L "+target.x+" "+target.y}else pathData+=" L "+target.x+" "+target.y;return pathData}var currentDirection=null;return{get:get}}(),pathvisio.pathway.dataSources=[{database:"Affy",id:"X",homePage:"http://www.affymetrix.com/",linkOut:"https://www.affymetrix.com/LinkServlet?probeset=$id",example:"1851_s_at",dataNodeType:"probe",species:"",priority:0,unknown:"urn:miriam:affy.probeset",regex:"d{4,}((_[asx])?_at)?",fullName:"Affymetrix Probeset"},{database:"Agilent",id:"Ag",homePage:"http://agilent.com",linkOut:"",example:"A_24_P98555",dataNodeType:"probe",species:"",priority:0,unknown:"Ag",regex:"A_d+_.+",fullName:"Agilent"},{database:"BIND",id:"Bi",homePage:"http://www.bind.ca/",linkOut:"http://www.bind.ca/Action?identifier=bindid&idsearch=$id",example:"",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:bind",regex:"^d+$",fullName:"BIND"},{database:"BioCyc",id:"Bc",homePage:"http://biocyc.org",linkOut:"http://biocyc.org/getid?id=$id",example:"ECOLI:CYT-D-UBIOX-CPLX",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:biocyc",regex:"^w+:[A-Za-z0-9-]+$",fullName:"BioCyc"},{database:"BioGrid",id:"Bg",homePage:"http://thebiogrid.org/",linkOut:"http://thebiogrid.org/$id",example:"31623",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:biogrid",regex:"^d+$",fullName:"BioGRID"},{database:"BioModels Database",id:"Bm",homePage:"http://www.ebi.ac.uk/biomodels/",linkOut:"http://www.ebi.ac.uk/biomodels-main/$id",example:"BIOMD0000000048",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:biomodels.db",regex:"^((BIOMD|MODEL)d{10})|(BMIDd{12})$",fullName:"BioModels Database"},{database:"BioSystems",id:"Bs",homePage:"http://www.ncbi.nlm.nih.gov/biosystems/",linkOut:"http://www.ncbi.nlm.nih.gov/biosystems/$id",example:"1",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:biosystems",regex:"^d+$",fullName:"BioSystems"},{database:"BRENDA",id:"Br",homePage:"http://www.brenda-enzymes.org/",linkOut:"http://www.brenda-enzymes.org/php/result_flat.php4?ecno=$id",example:"1.1.1.1",dataNodeType:"",species:"",priority:1,unknown:"urn:miriam:brenda",regex:"^((d+.-.-.-)|(d+.d+.-.-)|(d+.d+.d+.-)|(d+.d+.d+.d+))$",fullName:"BRENDA"},{database:"CAS",id:"Ca",homePage:"http://commonchemistry.org",linkOut:"http://commonchemistry.org/ChemicalDetail.aspx?ref=$id",example:"50-00-0",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:cas",regex:"^d{1,7}-d{2}-d$",fullName:"CAS"},{database:"CCDS",id:"Cc",homePage:"http://identifiers.org/ccds/",linkOut:"http://www.ncbi.nlm.nih.gov/CCDS/CcdsBrowse.cgi?REQUEST=ALLFIELDS&DATA=$id",example:"CCDS33337",dataNodeType:"gene",species:"",priority:0,unknown:"",regex:"^CCDSd+.d+$",fullName:"Consensus CDS"},{database:"ChEBI",id:"Ce",homePage:"http://www.ebi.ac.uk/chebi/",linkOut:"http://www.ebi.ac.uk/chebi/searchId.do?chebiId=$id",example:"CHEBI:36927",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:obo.chebi",regex:"^CHEBI:d+$",fullName:"ChEBI"},{database:"Chemspider",id:"Cs",homePage:"http://www.chemspider.com/",linkOut:"http://www.chemspider.com/Chemical-Structure.$id.html",example:"56586",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:chemspider",regex:"^d+$",fullName:"ChemSpider"},{database:"CodeLink",id:"Ge",homePage:"http://www.appliedmicroarrays.com/",linkOut:"",example:"GE86325",dataNodeType:"probe",species:"",priority:0,unknown:"Ge",regex:"",fullName:"CodeLink"},{database:"Database of Interacting Proteins",id:"Dip",homePage:"http://dip.doe-mbi.ucla.edu/",linkOut:"http://dip.doe-mbi.ucla.edu/dip/DIPview.cgi?ID=$id",example:"DIP-743N",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:dip",regex:"^DIP[:-]d{3}[EN]$",fullName:"Database of Interacting Proteins"},{database:"dbSNP",id:"Sn",homePage:"http://www.ncbi.nlm.nih.gov/sites/entrez?db=snp",linkOut:"http://www.ncbi.nlm.nih.gov/projects/SNP/snp_ref.cgi?rs=$id",example:"121909098",dataNodeType:"gene",species:"",priority:1,unknown:"",regex:"^d+$",fullName:"dbSNP"},{database:"DrugBank",id:"Dr",homePage:"http://www.drugbank.ca/",linkOut:"http://www.drugbank.ca/drugs/$id",example:"DB00001",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:drugbank",regex:"^DBd{5}$",fullName:"DrugBank"},{database:"EcoCyc",id:"Eco",homePage:"http://ecocyc.org/",linkOut:"http://ecocyc.org/ECOLI/NEW-IMAGE?type=NIL&object=$id",example:"325-BISPHOSPHATE-NUCLEOTIDASE-RXN",dataNodeType:"interaction",species:"Escherichia coli",priority:1,unknown:"Eco",regex:"",fullName:"EcoCyc"},{database:"EcoGene",id:"Ec",homePage:"http://ecogene.org/",linkOut:"http://ecogene.org/geneInfo.php?eg_id=$id",example:"EG10173",dataNodeType:"gene",species:"Escherichia coli",priority:1,unknown:"urn:miriam:ecogene",regex:"^EGd+$",fullName:"EcoGene"},{database:"EMBL",id:"Em",homePage:"http://www.ebi.ac.uk/embl/",linkOut:"http://www.ebi.ac.uk/ena/data/view/$id",example:"X58356",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:ena.embl",regex:"^[A-Z]+[0-9]+$",fullName:"European Nucleotide Archive"},{database:"Ensembl",id:"En",homePage:"http://www.ensembl.org/",linkOut:"http://www.ensembl.org/id/$id",example:"ENSG00000139618",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:ensembl",regex:"^ENS[A-Z]*[FPTG]d{11}$",fullName:"Ensembl"},{database:"Ensembl B. subtilis",id:"EnBs",homePage:"http://www.ensembl.org",linkOut:"http://bacteria.ensembl.org/Bacillus/B_subtilis/Gene/Summary?g=$id",example:"EBBACG00000000013",dataNodeType:"gene",species:"Bacillus subtilis",priority:1,unknown:"EnBs",regex:"EBBACGd{11}",fullName:"Ensembl"},{database:"Ensembl C. elegans",id:"EnCe",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Caenorhabditis_elegans/Gene/Summary?g=$id",example:"Y42H9B.1",dataNodeType:"gene",species:"Caenorhabditis elegans",priority:1,unknown:"EnCe",regex:"",fullName:"Ensembl"},{database:"Ensembl Chicken",id:"EnGg",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Gallus_gallus/Gene/Summary?g=$id",example:"ENSGALG00000021736",dataNodeType:"gene",species:"Gallus gallus",priority:1,unknown:"EnGg",regex:"ENSGALGd{11}",fullName:"Ensembl"},{database:"Ensembl Chimp",id:"EnPt",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Pan_troglodytes/Gene/Summary?g=$id",example:"ENSPTRG00000036034",dataNodeType:"gene",species:"Pan troglodytes",priority:1,unknown:"EnPt",regex:"ENSPTRGd{11}",fullName:"Ensembl"},{database:"Ensembl Cow",id:"EnBt",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Bos_taurus/Gene/Summary?g=$id",example:"ENSBTAG00000043548",dataNodeType:"gene",species:"Bos taurus",priority:1,unknown:"EnBt",regex:"ENSBTAGd{11}",fullName:"Ensembl"},{database:"Ensembl Dog",id:"EnCf",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Canis_familiaris/Gene/Summary?g=$id",example:"ENSCAFG00000025860",dataNodeType:"gene",species:"Canis familiaris",priority:1,unknown:"EnCf",regex:"ENSCAFGd{11}",fullName:"Ensembl"},{database:"Ensembl E. coli",id:"EnEc",homePage:"http://www.ensembl.org",linkOut:"http://bacteria.ensembl.org/Escherichia_Shigella/E_coli_K12/Gene/Summary?g=$id",example:"EBESCG00000000010",dataNodeType:"gene",species:"Escherichia coli",priority:1,unknown:"EnEc",regex:"EBESCGd{11}",fullName:"Ensembl"},{database:"Ensembl Fruitfly",id:"EnDm",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Drosophila_melanogaster/Gene/Summary?g=$id",example:"FBgn0032956",dataNodeType:"gene",species:"Drosophila melanogaster",priority:1,unknown:"EnDm",regex:"FBgnd{7}",fullName:"Ensembl"},{database:"Ensembl Horse",id:"EnQc",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Equus_caballus/Gene/Summary?g=$id",example:"ENSECAG00000026160",dataNodeType:"gene",species:"Equus caballus",priority:1,unknown:"EnQc",regex:"ENSECAGd{11}",fullName:"Ensembl"},{database:"Ensembl Human",id:"EnHs",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Homo_sapiens/Gene/Summary?g=$id",example:"ENSG00000139618",dataNodeType:"gene",species:"Homo sapiens",priority:1,unknown:"EnHs",regex:"ENSGd{11}",fullName:"Ensembl"},{database:"Ensembl M. tuberculosis",id:"EnMx",homePage:"http://www.ensembl.org",linkOut:"http://bacteria.ensembl.org/Mycobacterium/M_tuberculosis_H37Rv/Gene/Summary?g=$id",example:"EBMYCG00000003122",dataNodeType:"gene",species:"Mycobacterium tuberculosis",priority:1,unknown:"EnMx",regex:"EBMYCGd{11}",fullName:"Ensembl"},{database:"Ensembl Mosquito",id:"EnAg",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Anopheles_gambiae/Gene/Summary?_q=$id",example:"AGAP006864",dataNodeType:"gene",species:"Anopheles gambiae",priority:1,unknown:"EnAg",regex:"AGAPd{6}",fullName:"Ensembl"},{database:"Ensembl Mouse",id:"EnMm",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Mus_musculus/Gene/Summary?g=$id",example:"ENSMUSG00000017167",dataNodeType:"gene",species:"Mus musculus",priority:1,unknown:"EnMm",regex:"ENSMUSGd{11}",fullName:"Ensembl"},{database:"Ensembl Pig",id:"EnSs",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Sus_scrofa/Gene/Summary?g=$id",example:"ENSSSCG00000004244",dataNodeType:"gene",species:"Sus scrofa",priority:1,unknown:"EnSs",regex:"ENSSSCGd{11}",fullName:"Ensembl"},{database:"Ensembl Plants",id:"EP",homePage:"http://plants.ensembl.org/",linkOut:"http://plants.ensembl.org/id/$id",example:"AT1G73965",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:ensembl.plant",regex:"^w+$",fullName:"Ensembl Plants"},{database:"Ensembl Rat",id:"EnRn",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Rattus_norvegicus/Gene/Summary?g=$id",example:"ENSRNOG00000016648",dataNodeType:"gene",species:"Rattus norvegicus",priority:1,unknown:"EnRn",regex:"ENSRNOGd{11}",fullName:"Ensembl"},{database:"Ensembl Xenopus",id:"EnXt",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Xenopus_tropicalis/Gene/Summary?g=$id",example:"ENSXETG00000029448",dataNodeType:"gene",species:"Xenopus tropicalis",priority:1,unknown:"EnXt",regex:"ENSXETGd{11}",fullName:"Ensembl"},{database:"Ensembl Yeast",id:"EnSc",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Saccharomyces_cerevisiae/Gene/Summary?g=$id",example:"YGR147C",dataNodeType:"gene",species:"Saccharomyces cerevisiae",priority:1,unknown:"EnSc",regex:"Y[A-Z][RL]d{3}[WC](?:-[A-Z])?",fullName:"Ensembl"},{database:"Ensembl Zebrafish",id:"EnDr",homePage:"http://www.ensembl.org",linkOut:"http://www.ensembl.org/Danio_rerio/Gene/Summary?g=$id",example:"ENSDARG00000024771",dataNodeType:"gene",species:"Danio rerio",priority:1,unknown:"EnDr",regex:"ENSDARGd{11}",fullName:"Ensembl"},{database:"Entrez Gene",id:"L",homePage:"http://www.ncbi.nlm.nih.gov/gene",linkOut:"http://www.ncbi.nlm.nih.gov/gene/$id",example:"100010",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:ncbigene",regex:"^d+$",fullName:"Entrez Gene"},{database:"Enzyme Nomenclature",id:"E",homePage:"http://www.ebi.ac.uk/intenz/",linkOut:"http://www.ebi.ac.uk/intenz/query?cmd=SearchEC&ec=$id",example:"1.1.1.1",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:ec-code",regex:"^d+.-.-.-|d+.d+.-.-|d+.d+.d+.-|d+.d+.d+.(n)?d+$",fullName:"Enzyme Nomenclature"},{database:"FlyBase",id:"F",homePage:"http://flybase.org/",linkOut:"http://flybase.org/reports/$id.html",example:"FBgn0011293",dataNodeType:"gene",species:"Drosophila melanogaster",priority:1,unknown:"urn:miriam:flybase",regex:"^FBw{2}d{7}$",fullName:"FlyBase"},{database:"GenBank",id:"G",homePage:"http://www.ncbi.nlm.nih.gov/genbank/",linkOut:"http://www.ncbi.nlm.nih.gov/nuccore/$id",example:"NW_004190323",dataNodeType:"gene",species:"",priority:0,unknown:"G",regex:"(wd{5})|(w{2}d{6})|(w{3}d{5})",fullName:"GenBank"},{database:"Gene Wiki",id:"Gw",homePage:"http://en.wikipedia.org/wiki/Portal:Gene_Wiki",linkOut:"http://plugins.biogps.org/cgi-bin/wp.cgi?id=$id",example:"1017",dataNodeType:"gene",species:"",priority:0,unknown:"Gw",regex:"d+",fullName:"Gene Wiki"},{database:"GeneOntology",id:"T",homePage:"http://www.ebi.ac.uk/QuickGO/",linkOut:"http://www.ebi.ac.uk/QuickGO/GTerm?id=$id",example:"GO:0006915",dataNodeType:"gene",species:"",priority:0,unknown:"urn:miriam:obo.go",regex:"^GO:d{7}$",fullName:"Gene Ontology"},{database:"Gramene Arabidopsis",id:"EnAt",homePage:"http://www.gramene.org/",linkOut:"http://www.gramene.org/Arabidopsis_thaliana/Gene/Summary?g=$id",example:"ATMG01360-TAIR-G",dataNodeType:"gene",species:"Arabidopsis thaliana",priority:1,unknown:"EnAt",regex:"AT[dCM]Gd{5}-TAIR-G",fullName:"Grameen Arabidopsis"},{database:"Gramene Genes DB",id:"Gg",homePage:"http://www.gramene.org/",linkOut:"http://www.gramene.org/db/genes/search_gene?acc=$id",example:"GR:0060184",dataNodeType:"gene",species:"",priority:1,unknown:"Gg",regex:"GR:d+",fullName:"Gramene Genes"},{database:"Gramene Literature",id:"Gl",homePage:"http://www.gramene.org/",linkOut:"http://www.gramene.org/db/literature/pub_search?ref_id=$id",example:"6200",dataNodeType:"gene",species:"",priority:0,unknown:"Gl",regex:"",fullName:"Gramene Literature"},{database:"Gramene Maize",id:"EnZm",homePage:"http://www.ensembl.org",linkOut:"http://www.maizesequence.org/Zea_mays/Gene/Summary?g=$id",example:"GRMZM2G174107",dataNodeType:"gene",species:"",priority:1,unknown:"EnZm",regex:"",fullName:"Gramene Maize"},{database:"Gramene Pathway",id:"Gp",homePage:"http://www.gramene.org/pathway",linkOut:"",example:"AAH72400",dataNodeType:"pathway",species:"",priority:1,unknown:"Gp",regex:"",fullName:"Gramene Pathway"},{database:"Gramene Rice",id:"EnOj",homePage:"http://www.gramene.org/",linkOut:"http://www.gramene.org/Oryza_sativa/Gene/Summary?db=core;g=$id",example:"osa-MIR171a",dataNodeType:"gene",species:"",priority:1,unknown:"EnOj",regex:"",fullName:"Gramene Rice"},{database:"HGNC",id:"H",homePage:"http://www.genenames.org",linkOut:"http://www.genenames.org/data/hgnc_data.php?match=$id",example:"DAPK1",dataNodeType:"gene",species:"Homo sapiens",priority:1,unknown:"urn:miriam:hgnc.symbol",regex:"^[A-Za-z0-9]+",fullName:"HGNC Symbol"},{database:"HGNC Accession number",id:"Hac",homePage:"http://www.genenames.org",linkOut:"http://www.genenames.org/data/hgnc_data.php?hgnc_id=$id",example:"HGNC:2674",dataNodeType:"gene",species:"Homo sapiens",priority:1,unknown:"urn:miriam:hgnc",regex:"^(HGNC:)?d{1,5}$",fullName:"HGNC"},{database:"HMDB",id:"Ch",homePage:"http://www.hmdb.ca/",linkOut:"http://www.hmdb.ca/metabolites/$id",example:"HMDB00001",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:hmdb",regex:"^HMDBd{5}$",fullName:"HMDB"},{database:"HomoloGene",id:"Hg",homePage:"http://www.ncbi.nlm.nih.gov/homologene/",linkOut:"http://www.ncbi.nlm.nih.gov/homologene/$id",example:"1000",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:homologene",regex:"^d+$",fullName:"HomoloGene"},{database:"HPRD",id:"Hp",homePage:"http://www.hprd.org/",linkOut:"",example:"",dataNodeType:"interaction",species:"Homo sapiens",priority:1,unknown:"urn:miriam:hprd",regex:"",fullName:"HPRD"},{database:"Illumina",id:"Il",homePage:"http://www.illumina.com/",linkOut:"",example:"ILMN_5668",dataNodeType:"probe",species:"",priority:0,unknown:"Il",regex:"ILMN_d+",fullName:"Illumina"},{database:"IntAct",id:"Ia",homePage:"http://www.ebi.ac.uk/intact/",linkOut:"http://www.ebi.ac.uk/intact/pages/details/details.xhtml?interactionAc=$id",example:"EBI-2307691",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:intact",regex:"^EBI-[0-9]+$",fullName:"IntAct"},{database:"InterPro",id:"I",homePage:"http://www.ebi.ac.uk/interpro/",linkOut:"http://www.ebi.ac.uk/interpro/DisplayIproEntry?ac=$id",example:"IPR000100",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:interpro",regex:"^IPRd{6}$",fullName:"InterPro"},{database:"IPI",id:"Ip",homePage:"http://www.ebi.ac.uk/IPI",linkOut:"http://www.ebi.ac.uk/cgi-bin/dbfetch?db=IPI&id=$id&format=default",example:"IPI00000001",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:ipi",regex:"^IPId{8}$",fullName:"IPI"},{database:"IRGSP Gene",id:"Ir",homePage:"http://rgp.dna.affrc.go.jp/IRGSP/",linkOut:"",example:"Os12g0561000",dataNodeType:"gene",species:"",priority:1,unknown:"Ir",regex:"Osd{2}gd+",fullName:"IRGSP Gene"},{database:"Kegg Compound",id:"Ck",homePage:"http://www.genome.jp/kegg/ligand.html",linkOut:"http://www.genome.jp/dbget-bin/www_bget?cpd:$id",example:"C12345",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:kegg.compound",regex:"^Cd+$",fullName:"KEGG Compound"},{database:"KEGG Drug",id:"Kd",homePage:"http://www.genome.jp/kegg/drug/",linkOut:"http://www.genome.jp/dbget-bin/www_bget?dr:$id",example:"D00123",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:kegg.drug",regex:"^Dd+$",fullName:"KEGG Drug"},{database:"KEGG Genes",id:"Kg",homePage:"http://www.genome.jp/kegg/genes.html",linkOut:"http://www.genome.jp/dbget-bin/www_bget?$id",example:"syn:ssr3451",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:kegg.genes",regex:"^w+:[wd.-]*$",fullName:"KEGG Genes"},{database:"KEGG Glycan",id:"Kgl",homePage:"http://www.genome.jp/kegg/glycan/",linkOut:"http://www.genome.jp/dbget-bin/www_bget?gl:$id",example:"G00123",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:kegg.glycan",regex:"^Gd+$",fullName:"KEGG Glycan"},{database:"KEGG Pathway",id:"Kp",homePage:"http://www.genome.jp/kegg/pathway.html",linkOut:"http://www.genome.jp/dbget-bin/www_bget?pathway+$id",example:"hsa00620",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:kegg.pathway",regex:"^w{2,4}d{5}$",fullName:"KEGG Pathway"},{database:"KEGG Reaction",id:"Kr",homePage:"http://www.genome.jp/kegg/reaction/",linkOut:"http://www.genome.jp/dbget-bin/www_bget?rn:$id",example:"R00100",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:kegg.reaction",regex:"^Rd+$",fullName:"KEGG Reaction"},{database:"LIPID MAPS",id:"Lm",homePage:"http://www.lipidmaps.org",linkOut:"http://www.lipidmaps.org/data/get_lm_lipids_dbgif.php?LM_ID=$id",example:"LMPR0102010012",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:lipidmaps",regex:"^LM(FA|GL|GP|SP|ST|PR|SL|PK)[0-9]{4}([0-9a-zA-Z]{4,6})?$",fullName:"LIPID MAPS"},{database:"LipidBank",id:"Lb",homePage:"http://lipidbank.jp/index.html",linkOut:"http://lipidbank.jp/cgi-bin/detail.cgi?id=$id",example:"BBA0001",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:lipidbank",regex:"^w+d+$",fullName:"LipidBank"},{database:"MACiE",id:"Ma",homePage:"http://www.ebi.ac.uk/thornton-srv/databases/MACiE/index.html",linkOut:"http://www.ebi.ac.uk/thornton-srv/databases/cgi-bin/MACiE/entry/getPage.pl?id=$id",example:"M0001",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:macie",regex:"^Md{4}$",fullName:"MACiE"},{database:"MaizeGDB",id:"Mg",homePage:"",linkOut:"http://www.maizegdb.org/cgi-bin/displaylocusresults.cgi?term=$id",example:"acc1",dataNodeType:"gene",species:"Zea mays",priority:1,unknown:"Mg",regex:"",fullName:"MaizeGDB"},{database:"MatrixDB",id:"Md",homePage:"http://matrixdb.ibcp.fr/",linkOut:"http://matrixdb.ibcp.fr/cgi-bin/model/report/default?name=$id&class=Association",example:"P00747_P07355",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:matrixdb.association",regex:"^([A-N,R-Z][0-9][A-Z][A-Z, 0-9][A-Z, 0-9][0-9])_.*|([O,P,Q][0-9][A-Z, 0-9][A-Z, 0-9][A-Z, 0-9][0-9]_.*)|(GAG_.*)|(MULT_.*)|(PFRAG_.*)|(LIP_.*)|(CAT_.*)$",fullName:"MatrixDB"},{database:"MetaCyc",id:"Mc",homePage:"http://www.metacyc.org/",linkOut:"http://www.metacyc.org/META/NEW-IMAGE?type=NIL&object=$id",example:"D-GLUTAMATE-OXIDASE-RXN",dataNodeType:"interaction",species:"",priority:1,unknown:"Mc",regex:"",fullName:"MetaCyc"},{database:"MGI",id:"M",homePage:"http://www.informatics.jax.org/",linkOut:"http://www.informatics.jax.org/marker/$id",example:"MGI:2442292",dataNodeType:"gene",species:"Mus musculus",priority:1,unknown:"urn:miriam:mgd",regex:"^MGI:d+$",fullName:"Mouse Genome Database"},{database:"MINT",id:"Mi",homePage:"http://mint.bio.uniroma2.it/mint/",linkOut:"http://mint.bio.uniroma2.it/mint/search/inFrameInteraction.do?interactionAc=$id",example:"MINT-10000",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:mint",regex:"^MINT-d{1,5}$",fullName:"MINT"},{database:"miRBase mature sequence",id:"Mbm",homePage:"http://www.mirbase.org/",linkOut:"http://www.mirbase.org/cgi-bin/mature.pl?mature_acc=$id",example:"MIMAT0000001",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:mirbase.mature",regex:"MIMATd{7}",fullName:"miRBase mature sequence"},{database:"miRBase Sequence",id:"Mb",homePage:"http://microrna.sanger.ac.uk/",linkOut:"http://microrna.sanger.ac.uk/cgi-bin/sequences/mirna_entry.pl?acc=$id",example:"MI0000001",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:mirbase",regex:"MId{7}",fullName:"miRBase Sequence"},{database:"NASC Gene",id:"N",homePage:"http://arabidopsis.info/",linkOut:"",example:"ATMG00960-TAIR-G",dataNodeType:"gene",species:"Arabidopsis thaliana",priority:1,unknown:"N",regex:"AT[dCM]Gd{5}-TAIR-G",fullName:"NASC Gene"},{database:"NCBI Protein",id:"Np",homePage:"http://www.ncbi.nlm.nih.gov/protein",linkOut:"http://www.ncbi.nlm.nih.gov/protein/$id",example:"CAA71118.1",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:ncbiprotein",regex:"^w+d+(.d+)?$",fullName:"NCBI Protein"},{database:"NCI Pathway Interaction Database",id:"Pid",homePage:"http://pid.nci.nih.gov/",linkOut:"http://pid.nci.nih.gov/search/pathway_landing.shtml?what=graphic&jpg=on&pathway_id=$id",example:"pi3kcipathway",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:pid.pathway",regex:"^w+$",fullName:"NCI Pathway Interaction Database"},{database:"NuGO wiki",id:"Nw",homePage:"http://wiki.nugo.org",linkOut:"http://wiki.nugo.org/index.php/$id",example:"HMDB00001",dataNodeType:"metabolite",species:"",priority:0,unknown:"Nw",regex:"",fullName:"NuGO wiki"},{database:"OMIM",id:"Om",homePage:"http://omim.org/",linkOut:"http://omim.org/entry/$id",example:"603903",dataNodeType:"gene",species:"",priority:0,unknown:"urn:miriam:omim",regex:"^[*#+%^]?d{6}$",fullName:"OMIM"},{database:"Oryzabase",id:"Ob",homePage:"http://www.shigen.nig.ac.jp/rice/oryzabase",linkOut:"http://www.shigen.nig.ac.jp/rice/oryzabase/gateway/gatewayAction.do?target=symbol&id=$id",example:"468",dataNodeType:"gene",species:"Oryza sativa",priority:1,unknown:"Ob",regex:"",fullName:"Oryzabase"},{database:"Other",id:"O",homePage:"",linkOut:"",example:"",dataNodeType:"gene",species:"",priority:1,unknown:"O",regex:"",fullName:"Other"},{database:"Pathway Commons",id:"Pc",homePage:"http://www.pathwaycommons.org/pc/",linkOut:"http://www.pathwaycommons.org/pc/record2.do?id=$id",example:"485991",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:pathwaycommons",regex:"^d+$",fullName:"Pathway Commons"},{database:"PDB",id:"Pd",homePage:"http://www.pdb.org/",linkOut:"http://www.rcsb.org/pdb/explore/explore.do?structureId=$id",example:"2gc4",dataNodeType:"protein",species:"",priority:0,unknown:"urn:miriam:pdb",regex:"^[0-9][A-Za-z0-9]{3}$",fullName:"Protein Data Bank"},{database:"Pfam",id:"Pf",homePage:"http://pfam.sanger.ac.uk/",linkOut:"http://pfam.sanger.ac.uk/family/$id/",example:"PF01234",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:pfam",regex:"^PFd{5}$",fullName:"Pfam"},{database:"PharmGKB Drug",id:"Pgd",homePage:"http://www.pharmgkb.org/",linkOut:"http://www.pharmgkb.org/drug/$id",example:"PA448710",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:pharmgkb.drug",regex:"^PAd+$",fullName:"PharmGKB Drug"},{database:"PharmGKB Gene",id:"Pgg",homePage:"http://www.pharmgkb.org/",linkOut:"http://www.pharmgkb.org/gene/$id",example:"PA131",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:pharmgkb.gene",regex:"^PAw+$",fullName:"PharmGKB Gene"},{database:"PharmGKB Pathways",id:"Pgp",homePage:"http://www.pharmgkb.org/",linkOut:"http://www.pharmgkb.org/pathway/$id",example:"PA146123006",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:pharmgkb.pathways",regex:"^PAd+$",fullName:"PharmGKB Pathways"},{database:"PhosphoSite Protein",id:"Pp",homePage:"http://www.phosphosite.org/homeAction.do",linkOut:"http://www.phosphosite.org/proteinAction.do?id=$id",example:"12300",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:phosphosite.protein",regex:"^d{5}$",fullName:"PhosphoSite Protein"},{database:"PINA",id:"Pi",homePage:"http://cbg.garvan.unsw.edu.au/pina/",linkOut:"http://cbg.garvan.unsw.edu.au/pina/interactome.oneP.do?ac=$id&showExtend=null",example:"Q13485",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:pina",regex:"^([A-N,R-Z][0-9][A-Z][A-Z, 0-9][A-Z, 0-9][0-9])|([O,P,Q][0-9][A-Z, 0-9][A-Z, 0-9][A-Z, 0-9][0-9])$",fullName:"PINA"},{database:"PlantGDB",id:"Pl",homePage:"http://www.plantgdb.org/",linkOut:"",example:"PUT-157a-Vitis_vinifera-37378",dataNodeType:"gene",species:"",priority:1,unknown:"Pl",regex:"PUT-[wd-]+",fullName:"PlantGDB"},{database:"PubChem-bioassay",id:"Cpb",homePage:"http://www.ncbi.nlm.nih.gov/sites/entrez?db=pcassay ",linkOut:"http://pubchem.ncbi.nlm.nih.gov/assay/assay.cgi?aid=$id",example:"1018",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:pubchem.bioassay",regex:"^d+$",fullName:"PubChem-bioassay"},{database:"PubChem-compound",id:"Cpc",homePage:"http://pubchem.ncbi.nlm.nih.gov/",linkOut:"http://pubchem.ncbi.nlm.nih.gov/summary/summary.cgi?cid=$id",example:"100101",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:pubchem.compound",regex:"^d+$",fullName:"PubChem-compound"},{database:"PubChem-substance",id:"Cps",homePage:"http://pubchem.ncbi.nlm.nih.gov/",linkOut:"http://pubchem.ncbi.nlm.nih.gov/summary/summary.cgi?sid=$id",example:"100101",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:pubchem.substance",regex:"^d+$",fullName:"PubChem-substance"},{database:"Reactome",id:"Re",homePage:"http://www.reactome.org/",linkOut:"http://www.reactome.org/cgi-bin/eventbrowser_st_id?FROM_REACTOME=1&ST_ID=$id",example:"REACT_1590",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:reactome",regex:"^REACT_d+(.d+)?$",fullName:"Reactome"},{database:"RefSeq",id:"Q",homePage:"http://www.ncbi.nlm.nih.gov/projects/RefSeq/",linkOut:"http://www.ncbi.nlm.nih.gov/entrez/viewer.fcgi?val=$id",example:"NP_012345",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:refseq",regex:"^(NC|AC|NG|NT|NW|NZ|NM|NR|XM|XR|NP|AP|XP|ZP)_d+$",fullName:"RefSeq"},{database:"RESID",id:"Res",homePage:"http://www.ebi.ac.uk/RESID/",linkOut:"http://srs.ebi.ac.uk/srsbin/cgi-bin/wgetz?-id+6JSUg1NA6u4+-e+[RESID:'$id']",example:"AA0001",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:resid",regex:"^AAd{4}$",fullName:"RESID"},{database:"Rfam",id:"Rf",homePage:"",linkOut:"http://www.sanger.ac.uk/cgi-bin/Rfam/getacc?$id",example:"RF00066",dataNodeType:"gene",species:"",priority:1,unknown:"Rf",regex:"RFd+",fullName:"RFAM"},{database:"RGD",id:"R",homePage:"http://rgd.mcw.edu/",linkOut:"http://rgd.mcw.edu/tools/genes/genes_view.cgi?id=$id",example:"2018",dataNodeType:"gene",species:"Rattus norvegicus",priority:1,unknown:"urn:miriam:rgd",regex:"^d{4,7}$",fullName:"Rat Genome Database"},{database:"Rhea",id:"Rh",homePage:"http://www.ebi.ac.uk/rhea/",linkOut:"http://www.ebi.ac.uk/rhea/reaction.xhtml?id=$id",example:"12345",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:rhea",regex:"^d{5}$",fullName:"Rhea"},{database:"Rice Ensembl Gene",id:"Os",homePage:"http://www.gramene.org/Oryza_sativa",linkOut:"http://www.gramene.org/Oryza_sativa/geneview?gene=$id",example:"LOC_Os04g54800",dataNodeType:"gene",species:"Oryza sativa",priority:1,unknown:"Os",regex:"",fullName:"Rice Ensembl Gene"},{database:"SGD",id:"D",homePage:"http://www.yeastgenome.org/",linkOut:"http://www.yeastgenome.org/cgi-bin/locus.fpl?dbid=$id",example:"S000028457",dataNodeType:"gene",species:"Saccharomyces cerevisiae",priority:1,unknown:"urn:miriam:sgd",regex:"^Sd+$",fullName:"SGD"},{database:"Small Molecule Pathway Database",id:"Sm",homePage:"http://www.smpdb.ca/pathways",linkOut:"http://pathman.smpdb.ca/pathways/$id/pathway",example:"SMP00001",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:smpdb",regex:"^SMPd{5}$",fullName:"Small Molecule Pathway Database"},{database:"SMART",id:"Sma",homePage:"http://smart.embl-heidelberg.de/",linkOut:"http://smart.embl-heidelberg.de/smart/do_annotation.pl?DOMAIN=$id",example:"SM00015",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:smart",regex:"^SMd{5}$",fullName:"SMART"},{database:"SPIKE",id:"Sk",homePage:"http://www.cs.tau.ac.il/~spike/",linkOut:"http://www.cs.tau.ac.il/~spike/maps/$id.html",example:"spike00001",dataNodeType:"interaction",species:"",priority:1,unknown:"urn:miriam:spike.map",regex:"^spiked{5}$",fullName:"SPIKE Map"},{database:"SPRINT",id:"Spr",homePage:"http://www.bioinf.manchester.ac.uk/dbbrowser/sprint/",linkOut:"http://www.bioinf.manchester.ac.uk/cgi-bin/dbbrowser/sprint/searchprintss.cgi?prints_accn=$id&display_opts=Prints&category=None&queryform=false&regexpr=off",example:"PR00001",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:sprint",regex:"^PRd{5}$",fullName:"SPRINT"},{database:"STRING",id:"Str",homePage:"http://string.embl.de/",linkOut:"http://string.embl.de/interactions/$id",example:"P53350",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:string",regex:"^([A-N,R-Z][0-9][A-Z][A-Z, 0-9][A-Z, 0-9][0-9])|([O,P,Q][0-9][A-Z, 0-9][A-Z, 0-9][A-Z, 0-9][0-9])|([0-9][A-Za-z0-9]{3})$",fullName:"STRING"},{database:"SubstrateDB",id:"Sdb",homePage:"http://substrate.burnham.org/",linkOut:"http://substrate.burnham.org/protein/annotation/$id/html",example:"1915",dataNodeType:"protein",species:"",priority:0,unknown:"urn:miriam:pmap.substratedb",regex:"^d+$",fullName:"SubstrateDB"},{database:"SubtiWiki",id:"Sw",homePage:"http://www.subtiwiki.uni-goettingen.de/wiki/index.php/Main_Page",linkOut:"http://www.subtiwiki.uni-goettingen.de/wiki/index.php/$id",example:"BSU29180",dataNodeType:"gene",species:"Bacillus subtilis",priority:1,unknown:"urn:miriam:subtiwiki",regex:"^BSUd{5}$",fullName:"SubtiWiki"},{database:"SUPFAM",id:"Sf",homePage:"http://supfam.org/SUPERFAMILY/",linkOut:"http://supfam.org/SUPERFAMILY/cgi-bin/scop.cgi?ipid=$id",example:"SSF57615",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:supfam",regex:"^w+$",fullName:"SUPFAM"},{database:"SWISS-MODEL",id:"Sw",homePage:"http://swissmodel.expasy.org/",linkOut:"http://swissmodel.expasy.org/repository/smr.php?sptr_ac=$id",example:"P23298",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:swiss-model",regex:"^w+$",fullName:"SWISS-MODEL"},{database:"Systems Biology Ontology",id:"Sbo",homePage:"http://www.ebi.ac.uk/sbo/",linkOut:"http://www.ebi.ac.uk/sbo/main/$id",example:"SBO:0000262",dataNodeType:"ontology",species:"",priority:1,unknown:"urn:miriam:biomodels.sbo",regex:"^SBO:d{7}$",fullName:"Systems Biology Ontology"},{database:"TAIR",id:"A",homePage:"http://arabidopsis.org/index.jsp",linkOut:"http://arabidopsis.org/servlets/TairObject?type=locus&name=$id",example:"AT1G01030",dataNodeType:"gene",species:"",priority:1,unknown:"urn:miriam:tair.locus",regex:"^AT[1-5]Gd{5}$",fullName:"TAIR Locus"},{database:"TIGR",id:"Ti",homePage:"http://www.jcvi.org/",linkOut:"",example:"12012.t00308",dataNodeType:"gene",species:"",priority:1,unknown:"Ti",regex:"",fullName:"TIGR"},{database:"TTD Drug",id:"Td",homePage:"http://bidd.nus.edu.sg/group/cjttd/TTD_HOME.asp",linkOut:"http://bidd.nus.edu.sg/group/cjttd/ZFTTDDRUG.asp?ID=$id",example:"DAP000773",dataNodeType:"metabolite",species:"",priority:1,unknown:"urn:miriam:ttd.drug",regex:"^DAPd+$",fullName:"TTD Drug"},{database:"TTD Target",id:"Tt",homePage:"http://bidd.nus.edu.sg/group/cjttd/TTD_HOME.asp",linkOut:"http://bidd.nus.edu.sg/group/cjttd/ZFTTDDetail.asp?ID=$id",example:"TTDS00056",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:ttd.target",regex:"^TTDSd+$",fullName:"TTD Target"},{database:"TubercuList",id:"Tb",homePage:"http://tuberculist.epfl.ch",linkOut:"http://tuberculist.epfl.ch/quicksearch.php?gene+name=$id",example:"Rv0064",dataNodeType:"gene",species:"Mycobacterium tuberculosis",priority:1,unknown:"Tb",regex:"Rvd{4}(A|B|c|.d)?",fullName:"TubercuList"},{database:"UCSC Genome Browser",id:"Uc",homePage:"http://genome.ucsc.edu/",linkOut:"http://genome.ucsc.edu/cgi-bin/hgTracks?position=$id",example:"uc001tyh.1",dataNodeType:"gene",species:"",priority:1,unknown:"Uc",regex:"ucd{3}[a-z]{3}.d",fullName:"UCSC Genome Browser"},{database:"UniGene",id:"U",homePage:"http://www.ncbi.nlm.nih.gov/sites/entrez?db=unigene",linkOut:"http://www.ncbi.nlm.nih.gov/UniGene/clust.cgi?UGID=1548618&SEARCH=$id",example:"Hs.553708",dataNodeType:"gene",species:"",priority:1,unknown:"U",regex:"[A-Z][a-z][a-z]?.d+",fullName:"UniGene"},{database:"Unipathway",id:"Up",homePage:"http://www.grenoble.prabi.fr/obiwarehouse/unipathway",linkOut:"http://www.grenoble.prabi.fr/obiwarehouse/unipathway/upa?upid=$id",example:"UPA00206",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:unipathway",regex:"^UPAd{5}$",fullName:"Unipathway"},{database:"Uniprot-TrEMBL",id:"S",homePage:"http://www.uniprot.org/",linkOut:"http://www.uniprot.org/uniprot/$id",example:"P62158",dataNodeType:"protein",species:"",priority:1,unknown:"urn:miriam:uniprot",regex:"^([A-N,R-Z][0-9][A-Z][A-Z, 0-9][A-Z, 0-9][0-9])|([O,P,Q][0-9][A-Z, 0-9][A-Z, 0-9][A-Z, 0-9][0-9])|($",fullName:"UniProtKB/TrEMBL"},{database:"Uniprot-SwissProt",id:"Sp",homePage:"http://www.uniprot.org/",linkOut:"http://www.uniprot.org/uniprot/$id",example:"CALM_HUMAN",dataNodeType:"protein",species:"",priority:1,unknown:"Sp",regex:"^[A-Z0-9]+_[A-Z]+$",fullName:"UniProtKB/Swiss-Prot"},{database:"Wheat gene names",id:"Wn",homePage:"http://wheat.pw.usda.gov/",linkOut:"http://wheat.pw.usda.gov/report?class=gene;name=$id",example:"5S-Rrna-D1_(Triticum)",dataNodeType:"gene",species:"Triticum aestivum",priority:1,unknown:"Wn",regex:"",fullName:"Wheat gene names"},{database:"Wheat gene refs",id:"Wr",homePage:"http://wheat.pw.usda.gov/",linkOut:"http://wheat.pw.usda.gov/cgi-bin/graingenes/report.cgi?class=reference&name=$id",example:"WGS-95-1333",dataNodeType:"probe",species:"Triticum aestivum",priority:0,unknown:"Wr",regex:"",fullName:"Wheat gene refs"},{database:"WikiGenes",id:"Wg",homePage:"http://www.wikigenes.org/",linkOut:"http://www.wikigenes.org/e/gene/e/$id.html",example:"7157",dataNodeType:"gene",species:"",priority:0,unknown:"Wg",regex:"",fullName:"WikiGenes"},{database:"WikiPathways",id:"Wp",homePage:"http://www.wikipathways.org/",linkOut:"http://www.wikipathways.org/index.php/Pathway:$id",example:"WP100",dataNodeType:"pathway",species:"",priority:1,unknown:"urn:miriam:wikipathways",regex:"WPd{1,5}",fullName:"WikiPathways"},{database:"Wikipedia",id:"Wi",homePage:"http://www.wikipedia.org",linkOut:"http://en.wikipedia.org/wiki/$id",example:"Acetate",dataNodeType:"metabolite",species:"",priority:0,unknown:"Wi",regex:"",fullName:"Wikipedia"},{database:"WormBase",id:"W",homePage:"http://www.wormbase.org/",linkOut:"http://www.wormbase.org/db/gene/gene?name=$id;class=Gene",example:"WBGene00000001",dataNodeType:"gene",species:"Caenorhabditis elegans",priority:1,unknown:"urn:miriam:wormbase",regex:"^WBGened{8}$",fullName:"WormBase"},{database:"ZFIN",id:"Z",homePage:"http://zfin.org",linkOut:"http://zfin.org/action/marker/view/$id",example:"ZDB-GENE-041118-11",dataNodeType:"gene",species:"Danio rerio",priority:1,unknown:"urn:miriam:zfin",regex:"ZDB-GENE-d+-d+",fullName:"ZFIN Gene"}],pathvisio.pathway.xRef=function(){function getData(species,database,id,callback){var databaseId=pathvisio.pathway.dataSources.filter(function(element){return element.database===database
})[0].id,url="../../remote-data-sources/php/bridgedb.php?species="+encodeURIComponent(species)+"&database="+encodeURIComponent(databaseId)+"&id="+encodeURIComponent(id);$.ajax({url:url,dataType:"text",success:function(data){callback(data)}})}function displayData(organism,node){console.log("organism"),console.log(organism),self.node=node,getData(organism,node.xRef.database,node.xRef.id,function(data){var parser=CSVParser.parse(data,!0," ",!1,!1,"."),parsed=DataGridRenderer.json(parser.dataGrid,parser.headerNames,parser.headerTypes,"	","\n"),xRefDataParsed=self.xRefDataParsed=JSON.parse(parsed),idsByDatabase=xRefDataParsed,feature={};idsByDatabase.ids=[];var features=[];xRefDataParsed.forEach(function(xRefForEach,index,array){feature.database=xRefForEach.database,feature.ids=[],0===features.filter(function(featureFilter){return featureFilter.database===xRefForEach.database}).length&&(array.filter(function(xRefFilter){return xRefFilter.database===xRefForEach.database}).forEach(function(element){feature.ids.push(element.id)}),features.push({database:xRefForEach.database,ids:feature.ids}))}),features.forEach(function(feature){try{var dataSource=pathvisio.pathway.dataSources.filter(function(dataSource){return dataSource.database.replace(/[^a-z0-9]/gi,"").toLowerCase()==feature.database.replace(/[^a-z0-9]/gi,"").toLowerCase()})[0];feature.dataSourceId=dataSource.id,feature.linkOut=dataSource.linkOut,feature.priority=dataSource.priority}catch(e){console.warn(e),console.warn('Error: No database found for external reference database "'+feature.database+'".')}}),features.sort(function(a,b){if(a.priority===b.priority){var x=a.database.toLowerCase(),y=b.database.toLowerCase();return y>x?-1:x>y?1:0}return b.priority-a.priority});var specifiedFeature=features.filter(function(element){return element.database==node.xRef.database})[0],currentFeatureIndex=features.indexOf(specifiedFeature),specifiedXRefId=specifiedFeature.ids.filter(function(element){return element==node.xRef.id})[0],currentXRefIdIndex=specifiedFeature.ids.indexOf(specifiedXRefId);features=pathvisio.helpers.moveArrayItem(features,currentFeatureIndex,0),specifiedFeature.ids=pathvisio.helpers.moveArrayItem(specifiedFeature.ids,currentXRefIdIndex,0);var detailsFrame=d3.select("#details-frame");detailsFrame.selectAll("*").remove();var detailsHeader=detailsFrame.append("header").attr("class","data-node-label"),detailsPullLeftSpan=detailsHeader.append("span").attr("class","pull-left"),detailsMoveSpan=detailsPullLeftSpan.append("span").attr("class","header-move");detailsMoveSpan.append("i").attr("class","icon-move").attr("style","color:#aaa");var detailsHeaderLabelSpan=detailsHeader.append("span").attr("style","font-size: 120%;").text(function(){return node.textLabel.text+" "}),detailsSearchSpan=detailsHeaderLabelSpan.append("span").attr("class","header-search").attr("title",function(){return"Search for pathways containing "+node.textLabel.text}),detailsSearchLink=detailsSearchSpan.append("a").attr("href",function(){return"http://wikipathways.org//index.php?title=Special:SearchPathways&doSearch=1&ids="+node.xRef.id+"&codes="+pathvisio.pathway.dataSources.filter(function(dataSource){return dataSource.database.replace(/[^a-z0-9]/gi,"").toLowerCase()==node.xRef.database.replace(/[^a-z0-9]/gi,"").toLowerCase()})[0].id+"&type=xref"});detailsSearchLink.append("i").attr("class","icon-search").attr("style","color:blue; font-size:50%");var detailsPullRightSpan=detailsHeader.append("span").attr("class","pull-right"),detailsCloseSpan=detailsPullRightSpan.append("span").attr("class","header-close").on("click",function(){detailsFrame.selectAll("*").remove(),detailsFrame[0][0].style.visibility="hidden"});detailsCloseSpan.append("i").attr("class","icon-remove").attr("style","color:#aaa; font-size:120%");var dataNodeTypeDiv=detailsHeader.append("div").attr("class","data-node-description");dataNodeTypeDiv.append("h2").text(node.dataNodeType);var detailsList=detailsFrame.append("ul").attr("class","data-node"),detailsListItems=detailsList.selectAll("li").data(features).enter().append("li");detailsListItems[0].forEach(function(detailsListItem){d3.select(detailsListItem).append("span").attr("class","feature-title").text(function(d){return d.database+": "});var linkOuts=d3.select(detailsListItem).selectAll("a").data(function(d){var featuresFilled=[];return d.ids.forEach(function(id){var linkOut=d.linkOut.replace("$id",id);featuresFilled.push({id:id,linkOut:linkOut})}),featuresFilled}).enter().append("a").attr("href",function(d){return d.linkOut});linkOuts.append("span").attr("class","feature-text").attr("style",function(d){return d.linkOut?"":"color: #696969;"}).text(function(d){return" "+d.id})}),detailsFrame[0][0].style.visibility="visible"})}return{getData:getData,displayData:displayData}}();